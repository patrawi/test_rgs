---
import { Image } from 'astro:assets';
import logo from '../assets/images/logo.png';

const navItems = [
	{ name: 'เกี่ยวกับเรา', href: '#about' },
	{ name: 'บริการ', href: '#services' },
	{ name: 'ผลงาน', href: '#portfolio' },
	{ name: 'ติดต่อเรา', href: '#contact' },
];

const phoneNumber = '02-379-1713-4';
---

<header id="navbar" class="fixed top-6 left-0 right-0 z-50 transition-all duration-500">
	<div id="navbar-inner" class="container-custom transition-all duration-500">
		<nav class="flex items-center justify-between h-20">
			<!-- Logo -->
			<a href="/" class="flex items-center gap-3 group">
				<Image src={logo} alt="RGS Logo" class="h-12 w-auto object-contain group-hover:scale-105 transition-transform" format="webp" />
			</a>

			<!-- Desktop Navigation -->
			<div id="desktop-nav" class="hidden md:flex items-center gap-8 transition-all duration-500">
				{navItems.map(item => (
					<a href={item.href} class="text-white/80 hover:text-white transition-colors text-sm font-medium tracking-wide">
						{item.name}
					</a>
				))}
			</div>

			<!-- CTA Button -->
			<a href={`tel:${phoneNumber.replace(/-/g, '')}`} class="hidden md:inline-flex btn-primary">
				<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
				</svg>
				{phoneNumber}
			</a>

			<!-- Mobile Menu Button -->
			<button id="mobile-menu-btn" class="md:hidden text-white p-2" aria-label="Toggle menu">
				<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
				</svg>
			</button>
		</nav>
	</div>

	<!-- Mobile Menu -->
	<div id="mobile-menu" class="hidden md:hidden bg-navy-900/95 backdrop-blur-sm border-t border-white/10 mt-20">
		<div class="container-custom py-4 space-y-4">
			{navItems.map(item => (
				<a href={item.href} class="block text-white/80 hover:text-white transition-colors text-sm font-medium tracking-wide py-2">
					{item.name}
				</a>
			))}
			<a href={`tel:${phoneNumber.replace(/-/g, '')}`} class="block btn-primary text-center">
				<svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
					<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
				</svg>
				{phoneNumber}
			</a>
		</div>
	</div>
</header>

<script>
	const menuBtn = document.getElementById('mobile-menu-btn');
	const menu = document.getElementById('mobile-menu');
	const navbar = document.getElementById('navbar');
	const navbarInner = document.getElementById('navbar-inner');
	const desktopNav = document.getElementById('desktop-nav');

	menuBtn?.addEventListener('click', () => {
		menu?.classList.toggle('hidden');
	});

	// Close menu when clicking a link
	menu?.querySelectorAll('a').forEach(link => {
		link.addEventListener('click', () => {
			menu?.classList.add('hidden');
		});
	});

	// Add scroll effect to navbar - transform to floating pill
	window.addEventListener('scroll', () => {
		const scrollY = window.scrollY;

		if (scrollY > 100) {
			// Floating pill navbar styles
			navbar?.classList.add('top-6');
			navbar?.classList.remove('top-0');
			navbarInner?.classList.add('max-w-4xl', 'mx-auto', 'bg-navy-950/95', 'backdrop-blur-md', 'rounded-full', 'shadow-2xl', 'shadow-blue-900/20', 'border', 'px-6', 'py-2');
			navbarInner?.classList.remove('container-custom');
			desktopNav?.classList.add('gap-6');
			desktopNav?.classList.remove('gap-8');
		} else {
			// Regular full-width navbar
			navbar?.classList.remove('top-6');
			navbar?.classList.add('top-0');
			navbarInner?.classList.remove('max-w-4xl', 'mx-auto', 'bg-navy-950/95', 'backdrop-blur-md', 'rounded-full', 'shadow-2xl', 'shadow-blue-900/20', 'border', 'px-6', 'py-2');
			navbarInner?.classList.add('container-custom');
			desktopNav?.classList.remove('gap-6');
			desktopNav?.classList.add('gap-8');
		}
	});
</script>
